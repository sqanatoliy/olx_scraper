import time

import requests
from bs4 import BeautifulSoup, ResultSet, Tag

html_text = """
<div class="css-1bjsvqt"><ul class="css-1g9b9fl" style="max-height: 539px;"><li data-categoryid="108" class="css-11lsdm2"><div class="css-1oi36r6"><span>Оголошення</span><div class="css-51kdsh">9456</div></div></li><li data-categoryid="963" class="css-11lsdm2"><div class="css-1oi36r6"><span>Acura</span><div class="css-51kdsh">52</div></div></li><li data-categoryid="965" class="css-11lsdm2"><div class="css-1oi36r6"><span>Alfa Romeo</span><div class="css-51kdsh">32</div></div></li><li data-categoryid="1762" class="css-1jjcy88"><div class="css-1oi36r6"><span>Aston Martin</span></div></li><li data-categoryid="969" class="css-11lsdm2"><div class="css-1oi36r6"><span>Audi</span><div class="css-51kdsh">687</div></div></li><li data-categoryid="1544" class="css-11lsdm2"><div class="css-1oi36r6"><span>Bentley</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="973" class="css-11lsdm2"><div class="css-1oi36r6"><span>BMW</span><div class="css-51kdsh">642</div></div></li><li data-categoryid="1763" class="css-11lsdm2"><div class="css-1oi36r6"><span>BMW-Alpina</span></div></li><li data-categoryid="1413" class="css-11lsdm2"><div class="css-1oi36r6"><span>Brilliance</span></div></li><li data-categoryid="1764" class="css-11lsdm2"><div class="css-1oi36r6"><span>Buick</span><div class="css-51kdsh">18</div></div></li><li data-categoryid="1558" class="css-11lsdm2"><div class="css-1oi36r6"><span>BYD</span><div class="css-51kdsh">8</div></div></li><li data-categoryid="1546" class="css-11lsdm2"><div class="css-1oi36r6"><span>Cadillac</span><div class="css-51kdsh">27</div></div></li><li data-categoryid="1592" class="css-11lsdm2"><div class="css-1oi36r6"><span>Chana</span></div></li><li data-categoryid="981" class="css-11lsdm2"><div class="css-1oi36r6"><span>Chery</span><div class="css-51kdsh">43</div></div></li><li data-categoryid="983" class="css-11lsdm2"><div class="css-1oi36r6"><span>Chevrolet</span><div class="css-51kdsh">272</div></div></li><li data-categoryid="985" class="css-11lsdm2"><div class="css-1oi36r6"><span>Chrysler</span><div class="css-51kdsh">35</div></div></li><li data-categoryid="987" class="css-11lsdm2"><div class="css-1oi36r6"><span>Citroen</span><div class="css-51kdsh">93</div></div></li><li data-categoryid="989" class="css-11lsdm2"><div class="css-1oi36r6"><span>Dacia</span><div class="css-51kdsh">34</div></div></li><li data-categoryid="1574" class="css-11lsdm2"><div class="css-1oi36r6"><span>Dadi</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="991" class="css-11lsdm2"><div class="css-1oi36r6"><span>Daewoo</span><div class="css-51kdsh">142</div></div></li><li data-categoryid="1560" class="css-11lsdm2"><div class="css-1oi36r6"><span>Daihatsu</span><div class="css-51kdsh">5</div></div></li><li data-categoryid="997" class="css-11lsdm2"><div class="css-1oi36r6"><span>Dodge</span><div class="css-51kdsh">90</div></div></li><li data-categoryid="1765" class="css-11lsdm2"><div class="css-1oi36r6"><span>FAW</span></div></li><li data-categoryid="1588" class="css-11lsdm2"><div class="css-1oi36r6"><span>Ferrari</span></div></li><li data-categoryid="1007" class="css-11lsdm2"><div class="css-1oi36r6"><span>Fiat</span><div class="css-51kdsh">98</div></div></li><li data-categoryid="1009" class="css-11lsdm2"><div class="css-1oi36r6"><span>Ford</span><div class="css-51kdsh">601</div></div></li><li data-categoryid="1011" class="css-11lsdm2"><div class="css-1oi36r6"><span>Geely</span><div class="css-51kdsh">27</div></div></li><li data-categoryid="1594" class="css-11lsdm2"><div class="css-1oi36r6"><span>GMC</span><div class="css-51kdsh">14</div></div></li><li data-categoryid="1015" class="css-11lsdm2"><div class="css-1oi36r6"><span>Great Wall</span><div class="css-51kdsh">11</div></div></li><li data-categoryid="1766" class="css-11lsdm2"><div class="css-1oi36r6"><span>Groz</span></div></li><li data-categoryid="1019" class="css-11lsdm2"><div class="css-1oi36r6"><span>Honda</span><div class="css-51kdsh">220</div></div></li><li data-categoryid="1582" class="css-11lsdm2"><div class="css-1oi36r6"><span>Hummer</span></div></li><li data-categoryid="1023" class="css-11lsdm2"><div class="css-1oi36r6"><span>Hyundai</span><div class="css-51kdsh">486</div></div></li><li data-categoryid="1534" class="css-11lsdm2"><div class="css-1oi36r6"><span>Infiniti</span><div class="css-51kdsh">93</div></div></li><li data-categoryid="1570" class="css-11lsdm2"><div class="css-1oi36r6"><span>Isuzu</span><div class="css-51kdsh">2</div></div></li><li data-categoryid="1550" class="css-11lsdm2"><div class="css-1oi36r6"><span>Iveco</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="1586" class="css-11lsdm2"><div class="css-1oi36r6"><span>JAC</span><div class="css-51kdsh">4</div></div></li><li data-categoryid="1538" class="css-11lsdm2"><div class="css-1oi36r6"><span>Jaguar</span><div class="css-51kdsh">43</div></div></li><li data-categoryid="1035" class="css-11lsdm2"><div class="css-1oi36r6"><span>Jeep</span><div class="css-51kdsh">208</div></div></li><li data-categoryid="1037" class="css-11lsdm2"><div class="css-1oi36r6"><span>Kia</span><div class="css-51kdsh">403</div></div></li><li data-categoryid="1767" class="css-11lsdm2"><div class="css-1oi36r6"><span>Lamborghini</span><div class="css-51kdsh">2</div></div></li><li data-categoryid="1552" class="css-11lsdm2"><div class="css-1oi36r6"><span>Lancia</span><div class="css-51kdsh">2</div></div></li><li data-categoryid="1043" class="css-11lsdm2"><div class="css-1oi36r6"><span>Land Rover</span><div class="css-51kdsh">89</div></div></li><li data-categoryid="1045" class="css-11lsdm2"><div class="css-1oi36r6"><span>Lexus</span><div class="css-51kdsh">117</div></div></li><li data-categoryid="1564" class="css-11lsdm2"><div class="css-1oi36r6"><span>Lifan</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="1548" class="css-11lsdm2"><div class="css-1oi36r6"><span>Lincoln</span><div class="css-51kdsh">37</div></div></li><li data-categoryid="1768" class="css-11lsdm2"><div class="css-1oi36r6"><span>Lotus</span></div></li><li data-categoryid="1576" class="css-11lsdm2"><div class="css-1oi36r6"><span>Maserati</span><div class="css-51kdsh">7</div></div></li><li data-categoryid="1769" class="css-11lsdm2"><div class="css-1oi36r6"><span>Maybach</span></div></li><li data-categoryid="1053" class="css-11lsdm2"><div class="css-1oi36r6"><span>Mazda</span><div class="css-51kdsh">267</div></div></li><li data-categoryid="1770" class="css-11lsdm2"><div class="css-1oi36r6"><span>McLaren</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="1055" class="css-11lsdm2"><div class="css-1oi36r6"><span>Mercedes-Benz</span><div class="css-51kdsh">440</div></div></li><li data-categoryid="1771" class="css-11lsdm2"><div class="css-1oi36r6"><span>Mercury</span><div class="css-51kdsh">2</div></div></li><li data-categoryid="1566" class="css-11lsdm2"><div class="css-1oi36r6"><span>MG</span><div class="css-51kdsh">9</div></div></li><li data-categoryid="1540" class="css-11lsdm2"><div class="css-1oi36r6"><span>MINI</span><div class="css-51kdsh">39</div></div></li><li data-categoryid="1063" class="css-11lsdm2"><div class="css-1oi36r6"><span>Mitsubishi</span><div class="css-51kdsh">215</div></div></li><li data-categoryid="1065" class="css-11lsdm2"><div class="css-1oi36r6"><span>Nissan</span><div class="css-51kdsh">410</div></div></li><li data-categoryid="1067" class="css-11lsdm2"><div class="css-1oi36r6"><span>Oldsmobile</span></div></li><li data-categoryid="1069" class="css-11lsdm2"><div class="css-1oi36r6"><span>Opel</span><div class="css-51kdsh">252</div></div></li><li data-categoryid="1071" class="css-11lsdm2"><div class="css-1oi36r6"><span>Peugeot</span><div class="css-51kdsh">138</div></div></li><li data-categoryid="3706" class="css-11lsdm2"><div class="css-1oi36r6"><span>Polestar</span><div class="css-51kdsh">3</div></div></li><li data-categoryid="1584" class="css-11lsdm2"><div class="css-1oi36r6"><span>Pontiac</span><div class="css-51kdsh">2</div></div></li><li data-categoryid="1077" class="css-11lsdm2"><div class="css-1oi36r6"><span>Porsche</span><div class="css-51kdsh">45</div></div></li><li data-categoryid="1772" class="css-11lsdm2"><div class="css-1oi36r6"><span>Proton</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="1773" class="css-11lsdm2"><div class="css-1oi36r6"><span>Ram</span><div class="css-51kdsh">5</div></div></li><li data-categoryid="1562" class="css-11lsdm2"><div class="css-1oi36r6"><span>Ravon</span><div class="css-51kdsh">7</div></div></li><li data-categoryid="1081" class="css-11lsdm2"><div class="css-1oi36r6"><span>Renault</span><div class="css-51kdsh">339</div></div></li><li data-categoryid="1774" class="css-11lsdm2"><div class="css-1oi36r6"><span>Rolls-Royce</span></div></li><li data-categoryid="1361" class="css-11lsdm2"><div class="css-1oi36r6"><span>Roewe</span></div></li><li data-categoryid="1542" class="css-11lsdm2"><div class="css-1oi36r6"><span>Rover</span><div class="css-51kdsh">8</div></div></li><li data-categoryid="1554" class="css-11lsdm2"><div class="css-1oi36r6"><span>Saab</span><div class="css-51kdsh">10</div></div></li><li data-categoryid="1572" class="css-11lsdm2"><div class="css-1oi36r6"><span>Samand</span></div></li><li data-categoryid="1775" class="css-11lsdm2"><div class="css-1oi36r6"><span>Samsung</span><div class="css-51kdsh">3</div></div></li><li data-categoryid="1093" class="css-11lsdm2"><div class="css-1oi36r6"><span>Seat</span><div class="css-51kdsh">48</div></div></li><li data-categoryid="1776" class="css-11lsdm2"><div class="css-1oi36r6"><span>Shelby</span></div></li><li data-categoryid="1095" class="css-11lsdm2"><div class="css-1oi36r6"><span>Skoda</span><div class="css-51kdsh">271</div></div></li><li data-categoryid="1097" class="css-11lsdm2"><div class="css-1oi36r6"><span>Smart</span><div class="css-51kdsh">31</div></div></li><li data-categoryid="1101" class="css-11lsdm2"><div class="css-1oi36r6"><span>SsangYong</span><div class="css-51kdsh">22</div></div></li><li data-categoryid="1103" class="css-11lsdm2"><div class="css-1oi36r6"><span>Subaru</span><div class="css-51kdsh">107</div></div></li><li data-categoryid="1105" class="css-11lsdm2"><div class="css-1oi36r6"><span>Suzuki</span><div class="css-51kdsh">53</div></div></li><li data-categoryid="1777" class="css-11lsdm2"><div class="css-1oi36r6"><span>TATA</span></div></li><li data-categoryid="1556" class="css-11lsdm2"><div class="css-1oi36r6"><span>Tesla</span><div class="css-51kdsh">238</div></div></li><li data-categoryid="1107" class="css-11lsdm2"><div class="css-1oi36r6"><span>Toyota</span><div class="css-51kdsh">427</div></div></li><li data-categoryid="1109" class="css-11lsdm2"><div class="css-1oi36r6"><span>Volkswagen</span><div class="css-51kdsh">900</div></div></li><li data-categoryid="1111" class="css-11lsdm2"><div class="css-1oi36r6"><span>Volvo</span><div class="css-51kdsh">143</div></div></li><li data-categoryid="1578" class="css-11lsdm2"><div class="css-1oi36r6"><span>Wartburg</span></div></li><li data-categoryid="1590" class="css-11lsdm2"><div class="css-1oi36r6"><span>ZX</span></div></li><li data-categoryid="1568" class="css-11lsdm2"><div class="css-1oi36r6"><span>Богдан</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="1115" class="css-11lsdm2"><div class="css-1oi36r6"><span>ВАЗ</span><div class="css-51kdsh">212</div></div></li><li data-categoryid="1117" class="css-11lsdm2"><div class="css-1oi36r6"><span>ГАЗ</span><div class="css-51kdsh">49</div></div></li><li data-categoryid="1119" class="css-11lsdm2"><div class="css-1oi36r6"><span>ЗАЗ</span><div class="css-51kdsh">63</div></div></li><li data-categoryid="1121" class="css-11lsdm2"><div class="css-1oi36r6"><span>ИЖ</span><div class="css-51kdsh">1</div></div></li><li data-categoryid="1536" class="css-11lsdm2"><div class="css-1oi36r6"><span>ЛуАЗ</span></div></li><li data-categoryid="1123" class="css-11lsdm2"><div class="css-1oi36r6"><span>Москвич / АЗЛК</span><div class="css-51kdsh">16</div></div></li><li data-categoryid="1580" class="css-11lsdm2"><div class="css-1oi36r6"><span>РАФ</span></div></li><li data-categoryid="1131" class="css-11lsdm2"><div class="css-1oi36r6"><span>УАЗ</span><div class="css-51kdsh">5</div></div></li><li data-categoryid="1133" class="css-11lsdm2"><div class="css-1oi36r6"><span>Інші</span><div class="css-51kdsh">25</div></div></li></ul></div>
"""


def advs():
    p = 0
    j = 0
    url_list = lambda page: f"https://www.olx.ua/uk/list/?page={page}"
    url_transport = lambda \
            page: f"https://www.olx.ua/uk/transport/selhoztehnika/?currency=UAH&page={page}&search%5Bfilter_enum_cleared_customs%5D%5B0%5D=yes&search%5Bfilter_float_motor_mileage%3Ato%5D=500000&search%5Bfilter_float_price%3Ato%5D=1000000"
    for i in range(1, 1):
        p += 1
        response = requests.get(url_transport(i), headers={"User-Agent": "Mozilla/5.0"})
        soup = BeautifulSoup(response.text, "html.parser")
        adv_cards: ResultSet[Tag] = soup.select('div[data-testid="l-card"]')
        print(f"Response page {p} status code: {response.status_code}")
        if url_list(i) in response.url:
            for card in adv_cards:
                j += 1
                ad_url = card.select_one('div[data-cy="ad-card-title"] a')
                if ad_url:
                    title = card.select_one('div[data-cy="ad-card-title"] a > h4').text
                    # print(ad_url)

                    print(f"Page {p} :", f"Ad {j} {title} {ad_url.get('href')}")
        else:
            for card in adv_cards:
                j += 1
                ad_url = card.select_one('div[data-cy="ad-card-title"] a')
                if ad_url:
                    title = card.select_one('div[data-cy="ad-card-title"] a > h4').text
                    # print(ad_url)

                    print(f"Page {p} :", f"Ad {j} {title} {ad_url.get('href')}")
        time.sleep(1)


def list_auto():
    soup = BeautifulSoup(html_text, "html.parser")
    lst_autos = soup.select('li span')
    for i in lst_autos:
        print(i.text)


if __name__ == "__main__":
    print(list_auto())
